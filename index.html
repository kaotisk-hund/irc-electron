<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
  <head>
  	<title>KiRc</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/foundation.css">
    <link rel="stylesheet" href="assets/css/app.css">
  </head>
<body>
	<div class="grid-container">
		<div class="grid-x">
			<div class="small-9 cell">
				<h2>Messages</h2>
			</div>
			<div id="status" class="small-3 cell">
				
			</div>
		</div>
			
		<div class="small-12 cell">

			<div class="messages">
			</div>
			<div class="send">
				<form id="messaging">
					<input type="text" id="message" placeholder="Enter your message here...">
					<button class="button" type="submit">Send</button>
				</form>
			</div>
		</div>
	</div>

	<script>
		const electron = require('electron');
		const {ipcRenderer} = electron;

    	/*
    	 * Sending messages
    	 */
    	document.querySelector('#messaging').addEventListener('submit', sendMessage);
    	function sendMessage(e){
    		e.preventDefault();
    		const message = document.querySelector('#message').value;

    		ipcRenderer.send('irc_send', message);
    	}

	    /*
	     * Messages handling
	     */
	    const div = document.querySelector('.messages');
	    ipcRenderer.on('irc_message', function(e, data){
	      const p = document.createElement('p');
	      p.className = 'message';
	      const message = document.createTextNode(data.from + ": " + data.message);
	      p.appendChild(message);
	      div.appendChild(p);
	    });
		

	</script>
</body>
</html>
